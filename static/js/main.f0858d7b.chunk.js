(this.webpackJsonpfront_end=this.webpackJsonpfront_end||[]).push([[0],{34:function(e,t,c){},57:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var a=c(9),n=c(20),s=c(45),o=c.n(s),i=(c(57),c(7)),r=(c(34),c(16)),l=c(4),d=c.n(l),u=c(8),j=c(10),m=c(6);function f(e){var t=e.clouds,c=e.setClouds,n=e.setLoader,s=Object(a.useState)({name:"",file:""}),o=Object(i.a)(s,2),r=o[0],l=o[1],d=function(e){e.preventDefault();var t=document.getElementsByClassName("add-item")[0],c=Array.from(document.getElementsByClassName("input"));t.classList.contains("show-add-item-form")?(t.classList.remove("show-add-item-form"),document.getElementById("image").style.backgroundImage="url('')",c.map((function(e){return e.value=""})),l({name:"",file:""})):(document.getElementById("image").style.border="2px dotted #9E6240",document.getElementById("upload-img").style.opacity="1",t.classList.add("show-add-item-form"))};return Object(m.jsxs)("div",{className:"add-item-card",children:[Object(m.jsx)("i",{className:"fas fa-plus-circle",title:"Add new cloud",onClick:d}),Object(m.jsx)("div",{className:"add-item",children:Object(m.jsxs)("form",{action:"",children:[Object(m.jsxs)("div",{className:"img-insertion",id:"image",children:[Object(m.jsx)("span",{id:"upload-img",children:"Upload image"}),Object(m.jsx)("input",{type:"file",accept:"image/*",id:"getval",className:"input",onChange:function(e){var t=e.target.files[0];l({file:t,name:r.name});var c=new FileReader;c.onloadend=function(){document.getElementById("image").style.backgroundImage="url("+c.result+")",document.getElementById("image").style.border="none",document.getElementById("upload-img").style.opacity="0"},t&&c.readAsDataURL(t)}})]}),Object(m.jsxs)("div",{className:"info-insertion",children:[Object(m.jsx)("input",{type:"text",onChange:function(e){var t=e.target;l({file:r.file,name:t.value})},placeholder:"Put the name here",className:"input_field input",name:"cloud_name",autoComplete:"off",required:!0}),Object(m.jsxs)("div",{className:"button-div",children:[Object(m.jsx)("button",{type:"submit",onClick:function(e){if(e.preventDefault(),""!==r.name){n(!0);var a=new Headers;a.append("Content-Type","application/json"),a.append("Authorization",localStorage.getItem("access_token"));var s=JSON.stringify({name:r.name});fetch("https://api.bimdata.io/cloud",{method:"POST",headers:a,body:s,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){var a=new Headers;a.append("Authorization",localStorage.getItem("access_token"));var n=new FormData;n.append("image",r.file);var s={method:"PATCH",headers:a,body:n,redirect:"follow"};fetch("https://api.bimdata.io/cloud/"+e.id,s).then((function(e){return e.json()})).then((function(e){c([].concat(Object(j.a)(t),[e])),document.getElementsByClassName("add-item")[0].classList.remove("show-add-item-form"),Array.from(document.getElementsByClassName("input")).map((function(e){return e.value=""})),document.getElementById("image").style.backgroundImage="url('')",l({name:"",file:""})})).catch((function(e){return console.log("error",e)}))})).catch((function(e){return console.log("error",e)}))}},children:"Add cloud"}),Object(m.jsx)("i",{className:"fas fa-window-close",onClick:d})]})]})]})})]})}var b=c.p+"static/media/bim.38b3a7ed.jpeg";function h(e){var t=e.show,c=e.hide,a=e.icon,n=e.title,s=e.body,o=e.submit;return Object(m.jsx)("div",{className:"modal ".concat(t?"show":""," "),onClick:c,children:Object(m.jsxs)("div",{className:"modal-content",onClick:function(e){return e.stopPropagation()},children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("span",{children:a}),Object(m.jsx)("h4",{children:n})]}),Object(m.jsx)("div",{className:"modal-body",children:s}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{onClick:c,className:"cancel-ifc",children:"Cancel"}),Object(m.jsx)("button",{onClick:o,className:"submit-ifc",children:"Submit"})]})]})})}function p(e){var t=e.clouds,c=e.setClouds,n=e.cloud,s=e.index,o=e.setLoader,l=Object(r.f)(),d=Object(a.useState)(!1),u=Object(i.a)(d,2),f=u[0],p=u[1],O=Object(a.useState)(n.name),x=Object(i.a)(O,2),v=x[0],g=x[1],N=function(e){e.preventDefault();var a=new Headers;a.append("Authorization",localStorage.getItem("access_token")),a.append("Content-type","application/json");var s={method:"PATCH",headers:a,body:JSON.stringify({name:v}),redirect:"follow"};p(!1),o(!0),fetch("https://api.bimdata.io/cloud/"+n.id,s).then((function(e){return e.json()})).then((function(e){c([].concat(Object(j.a)(t),[e]))})).catch((function(e){return console.log("error",e)}))},w=Object(m.jsxs)("form",{className:"edit-cloud-form",onSubmit:N,children:[Object(m.jsx)("label",{htmlFor:"cloud-name",children:"New name : "}),Object(m.jsx)("input",{className:"edit-cloud-name",type:"text",value:v,onChange:function(e){var t=e.target;return g(t.value)}})]});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"cloud-item",children:Object(m.jsxs)("div",{className:"cloud-inner",children:[Object(m.jsxs)("div",{className:"cloud-front",children:[Object(m.jsx)("div",{className:"item-img",children:Object(m.jsx)("div",{id:"img",style:{backgroundImage:"url('".concat(n.image,"')")},children:null===n.image?Object(m.jsx)("img",{src:"".concat(b),alt:"IMG"}):null})}),Object(m.jsxs)("div",{className:"card-details",children:[Object(m.jsx)("h3",{children:n.name}),Object(m.jsxs)("span",{className:"date",children:["Created on ",function(e){var t=new Date(e),c=""+(t.getMonth()+1),a=""+t.getDate(),n=t.getFullYear();return c.length<2&&(c="0"+c),a.length<2&&(a="0"+a),[n,c,a].join("-")}(n.created_at)]}),Object(m.jsxs)("span",{className:"date",children:["At ",function(e){var t=new Date(e);return[t.getHours(),t.getMinutes(),t.getSeconds()].join(":")}(n.created_at)]})]})]}),Object(m.jsx)("div",{className:"cloud-back",children:Object(m.jsxs)("div",{className:"cloud-options",children:[Object(m.jsxs)("div",{className:"cloud-option",onClick:function(){return p(!0)},children:[Object(m.jsx)("i",{className:"fas fa-pen-square option-icon"}),Object(m.jsx)("span",{className:"option",children:"Update"})]}),Object(m.jsxs)("div",{className:"cloud-option",onClick:function(){return l("clouds/"+t[s].id+"/projects")},children:[Object(m.jsx)("i",{className:"fas fa-info-circle option-icon"}),Object(m.jsx)("span",{className:"option",children:"Details"})]}),Object(m.jsxs)("div",{className:"cloud-option",onClick:function(){return e=s,void(window.confirm("Do you really want to remove this cloud ?")&&t.forEach((function(a,n){if(n===e){o(!0);var s=new Headers;s.append("Authorization",localStorage.getItem("access_token"));var i={method:"DELETE",headers:s,redirect:"follow"};fetch("https://api.bimdata.io/cloud/"+a.id,i).then((function(e){return e.text()})).then((function(){var a=t.filter((function(t,c){return c!==e}));c(a)})).catch((function(e){return console.log("error",e)}))}})));var e},children:[Object(m.jsx)("i",{className:"fas fa-trash option-icon"}),Object(m.jsx)("span",{className:"option",children:"Delete"})]})]})})]})}),Object(m.jsx)(h,{show:f,body:w,hide:function(){p(!1),g(n.name)},icon:Object(m.jsx)("i",{className:"fas fa-pen-square"}),submit:N,title:"Edit cloud name"})]})}var O=c.p+"static/media/loading.edf8ee4d.gif";function x(){return Object(m.jsx)("div",{className:"loading",children:Object(m.jsx)("img",{src:O,alt:"loading..."})})}function v(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)([]),o=Object(i.a)(s,2),r=o[0],l=o[1],j=Object(a.useState)(""),b=Object(i.a)(j,2),h=b[0],O=b[1],v=Object(a.useState)(!0),g=Object(i.a)(v,2),N=g[0],w=g[1];Object(a.useEffect)((function(){y()}),[c.length]);var y=function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Headers,"https://api.bimdata.io/cloud",t.append("Authorization",localStorage.getItem("access_token")),c={method:"GET",headers:t,redirect:"follow"},e.next=6,fetch("https://api.bimdata.io/cloud",c);case 6:return a=e.sent,e.next=9,a.json();case 9:s=e.sent,n(s),l(s),w(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:N?Object(m.jsx)(x,{}):Object(m.jsxs)("div",{className:"clouds-container",children:[Object(m.jsxs)("div",{id:"search-bar",children:[Object(m.jsx)("i",{className:"fas fa-search"}),Object(m.jsx)("input",{className:"search-input",type:"text",placeholder:"Search a cloud",value:h,onChange:function(e){var t=e.target;O(t.value),l(c.filter((function(e){return e.name.toLowerCase().includes(t.value.toLowerCase())})))}})]}),Object(m.jsx)("h3",{className:"list-title",children:"List of clouds"}),Object(m.jsxs)("div",{id:"clouds-list",children:[Object(m.jsx)(f,{clouds:c,setClouds:n,setLoader:w}),""===h?c.map((function(e,t){return Object(m.jsx)(p,{cloud:e,setLoader:w,clouds:c,setClouds:n,index:t},t)})):r.map((function(e,t){return Object(m.jsx)(p,{cloud:e,setLoader:w,clouds:c,setClouds:n,index:t},t)}))]})]})})}function g(e){var t=e.token,c=e.setToken,a=Object(r.f)();return Object(m.jsxs)("div",{id:"header",children:[Object(m.jsxs)("div",{id:"left-side",children:[Object(m.jsx)("i",{className:"fas fa-home",onClick:function(){return a("/")}}),Object(m.jsx)("span",{onClick:function(){return a("/")},children:" GLOBETUDES"})]}),Object(m.jsx)("div",{id:"right-side",children:t?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("span",{children:localStorage.getItem("user")}),Object(m.jsx)("i",{className:"fas fa-sign-out-alt",onClick:function(){c(),a("/")},title:"Logout"})]}):null})]})}function N(e){var t=e.project,c=e.projects,n=e.setProjects,s=e.setLoader,o=Object(r.f)(),l=Object(a.useState)(!1),d=Object(i.a)(l,2),u=d[0],f=d[1],b=Object(a.useState)(t.name),p=Object(i.a)(b,2),O=p[0],x=p[1],v=function(){f(!1),x(t.name)},g=function(e){e.preventDefault(),v(),s(!0);var a=new Headers;a.append("Authorization",localStorage.getItem("access_token")),a.append("Content-type","application/json");var o={method:"PATCH",headers:a,body:JSON.stringify({name:O}),redirect:"follow"};fetch("https://api.bimdata.io/cloud/"+t.cloud.id+"/project/"+t.id,o).then((function(e){return e.json()})).then((function(e){n([].concat(Object(j.a)(c),[e]))})).catch((function(e){return console.log("error",e)}))},N=Object(m.jsxs)("form",{className:"edit-cloud-form",onSubmit:g,children:[Object(m.jsx)("label",{htmlFor:"cloud-name",children:"New name : "}),Object(m.jsx)("input",{className:"edit-cloud-name",type:"text",value:O,onChange:function(e){var t=e.target;return x(t.value)}})]});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"project-card",index:t.id,onClick:function(e){"I"!==e.target.tagName&&o("/clouds/"+t.cloud.id+"/projects/"+t.id+"/models")},children:[Object(m.jsx)("div",{className:"project-infos",children:t.name}),Object(m.jsxs)("div",{className:"project-options",children:[Object(m.jsx)("i",{className:"fas fa-edit",onClick:function(){f(!0)}}),Object(m.jsx)("i",{className:"fas fa-trash",onClick:function(){if(window.confirm("Do you really want to remove this project ?")){s(!0);var e=new Headers;e.append("Authorization",localStorage.getItem("access_token"));var a={method:"DELETE",headers:e,redirect:"follow"};fetch("https://api.bimdata.io/cloud/"+t.cloud.id+"/project/"+t.id,a).then((function(e){return e.text()})).then((function(){var e=c.filter((function(e){return t.id!==e.id}));n(e),s(!1)})).catch((function(e){return console.log("error",e)}))}}})]})]}),Object(m.jsx)(h,{show:u,hide:v,body:N,icon:Object(m.jsx)("i",{className:"fas fa-pen-square"}),submit:g,title:"Edit project infos"})]})}function w(){var e=Object(r.g)().cloud_id,t=Object(a.useState)([]),c=Object(i.a)(t,2),s=c[0],o=c[1],l=Object(a.useState)("add-form"),d=Object(i.a)(l,2),u=d[0],f=d[1],b=Object(a.useState)(""),h=Object(i.a)(b,2),p=h[0],O=h[1],v=Object(a.useState)([]),g=Object(i.a)(v,2),w=g[0],y=g[1],k=Object(a.useState)(""),C=Object(i.a)(k,2),S=C[0],_=C[1],I=Object(a.useState)(!0),E=Object(i.a)(I,2),L=E[0],T=E[1];Object(a.useEffect)((function(){!function(){var t=new Headers;t.append("Authorization",localStorage.getItem("access_token")),fetch("https://api.bimdata.io/cloud/"+e+"/project",{method:"GET",headers:t,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){o(e),y(e),T(!1)})).catch((function(e){return console.log("error",e)}))}()}),[s.length,e]);var F=function(e){O(e.target.value),27===e.keyCode&&(O(""),f("add-form"))};return Object(m.jsx)(m.Fragment,{children:L?Object(m.jsx)(x,{}):Object(m.jsxs)("div",{className:"clouds-container",children:[Object(m.jsxs)("div",{id:"menu",children:[Object(m.jsx)("div",{children:Object(m.jsxs)(n.b,{className:"back-link",to:"../",children:[Object(m.jsx)("i",{className:"fas fa-arrow-circle-left"})," Back"]})}),Object(m.jsxs)("div",{id:"search-projects",children:[Object(m.jsx)("i",{className:"fas fa-search"}),Object(m.jsx)("input",{className:"search-input",type:"text",placeholder:"Search a project",onChange:function(e){var t=e.target;_(t.value),y(s.filter((function(e){return e.name.toLowerCase().includes(t.value.toLowerCase())})))},value:S})]}),Object(m.jsxs)("div",{className:"add-project",children:[Object(m.jsxs)("button",{className:"add-project-button",onClick:function(){f((function(e){return e+" show-add-project-form"}))},children:[Object(m.jsx)("i",{className:"fas fa-plus"})," Create project"]}),Object(m.jsxs)("form",{action:"",className:u,onSubmit:function(t){t.preventDefault(),T(!0);var c=new Headers;c.append("Content-Type","application/json"),c.append("Authorization",localStorage.getItem("access_token"));var a=JSON.stringify({name:p});fetch("https://api.bimdata.io/cloud/"+e+"/project",{method:"POST",headers:c,body:a,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){o([].concat(Object(j.a)(s),[e])),f("add-form"),O("")})).catch((function(e){return console.log("error",e)}))},children:[Object(m.jsx)("input",{id:"input",type:"text",value:p,onChange:F,onKeyDown:F,placeholder:"New project name",required:!0}),Object(m.jsx)("button",{type:"submit",children:Object(m.jsx)("i",{className:"fas fa-paper-plane"})})]})]})]}),0===s.length?Object(m.jsx)("span",{id:"empty-list",children:"No projects in this cloud, click the button above to add one"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{className:"list-title",children:"List of projects"}),Object(m.jsx)("div",{className:"projects-list",children:""===S?s.map((function(e,t){return Object(m.jsx)(N,{project:e,projects:s,setProjects:o,setLoader:T},t)})):w.map((function(e,t){return Object(m.jsx)(N,{project:e,projects:s,setProjects:o,setLoader:T},t)}))})]})]})})}function y(e){var t=e.model,c=e.cloud_id,n=e.project_id,s=e.setLoader,o=e.models,l=e.setModels,d=Object(r.f)(),u=Object(a.useState)(""),j=Object(i.a)(u,2),f=j[0],b=j[1],h="https://api.bimdata.io/cloud/"+c+"/project/"+n+"/ifc/"+t.ifc_id;Object(a.useEffect)((function(){var e=new Headers;e.append("Authorization",localStorage.getItem("access_token")),fetch(h,{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){return b(e.map_file)})).catch((function(e){return console.log("error",e)}))}),[h]);return Object(m.jsxs)("div",{className:"model",children:[Object(m.jsx)("div",{className:"model-left",children:""!==f?Object(m.jsx)("img",{src:f,alt:"Map file"}):Object(m.jsx)("img",{src:O,id:"loading-map",alt:"Map file"})}),Object(m.jsxs)("div",{className:"model-right",children:[Object(m.jsx)("div",{className:"model-name",children:t.name}),Object(m.jsxs)("div",{className:"model-options",children:[Object(m.jsx)("i",{className:"fas fa-eye",onClick:function(){d("/clouds/"+c+"/projects/"+n+"/models/viewer/"+t.ifc_id)}}),Object(m.jsx)("i",{className:"fas fa-trash",onClick:function(){if(window.confirm("Do you really want to remove this project ?")){s(!0);var e=new Headers;e.append("Authorization",localStorage.getItem("access_token"));var a={method:"DELETE",headers:e,redirect:"follow"};fetch("https://api.bimdata.io/cloud/"+c+"/project/"+n+"/document/"+t.id,a).then((function(e){return e.text()})).then((function(){var e=o.filter((function(e){return t.id!==e.id}));l(e),s(!1)})).catch((function(e){return console.log("error",e)}))}}})]})]})]})}function k(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),c=t[0],s=t[1],o=Object(r.g)(),l=o.cloud_id,d=o.project_id,u=Object(a.useState)(!0),f=Object(i.a)(u,2),b=f[0],p=f[1],O=Object(a.useState)(!1),v=Object(i.a)(O,2),g=v[0],N=v[1],w=Object(a.useState)({filename:"",file:""}),k=Object(i.a)(w,2),C=k[0],S=k[1],_=function(e){var t=e.target;"text"===t.type?S({filename:t.value,file:C.file}):S({filename:C.filename,file:t.files[0]})},I=function(e){if(e.preventDefault(),C.file&&C.filename){E(),p(!0);var t=new Headers;t.append("Authorization",localStorage.getItem("access_token"));var a=new FormData;a.append("file",C.file),a.append("name",C.filename),fetch("https://api.bimdata.io/cloud/"+l+"/project/"+d+"/document",{method:"POST",headers:t,body:a,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){s.apply(void 0,Object(j.a)(c).concat([e]))})).catch((function(e){return console.log("error",e)}))}},E=function(){S({filename:"",file:""}),N(!1)},L=Object(m.jsxs)("form",{className:"add-ifc-form",action:"",onSubmit:I,children:[Object(m.jsx)("div",{className:"filename-input",children:Object(m.jsx)("input",{type:"text",placeholder:"IFC name",value:C.filename,onChange:_,required:!0})}),Object(m.jsxs)("div",{className:"file-input",children:[Object(m.jsx)("div",{children:C.file?Object(m.jsx)("i",{className:"fas fa-check-circle"}):"Click or drop IFC here"}),Object(m.jsx)("input",{type:"file",accept:".ifc",onChange:_,required:!0})]})]});return Object(a.useEffect)((function(){!function(){var e=new Headers;e.append("Authorization",localStorage.getItem("access_token")),fetch("https://api.bimdata.io/cloud/"+l+"/project/"+d+"/document",{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){s(e),p(!1)})).catch((function(e){return console.log("error",e)}))}()}),[c.length,l,d]),Object(m.jsx)("div",{className:"clouds-container",children:b?Object(m.jsx)(x,{}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{id:"menu",children:[Object(m.jsx)("div",{children:Object(m.jsxs)(n.b,{className:"back-link",to:"/clouds/"+l+"/projects/",children:[Object(m.jsx)("i",{className:"fas fa-arrow-circle-left"})," Back"]})}),Object(m.jsx)("div",{className:"add-project",children:Object(m.jsxs)("button",{className:"add-project-button",onClick:function(){return N(!0)},children:[Object(m.jsx)("i",{className:"fas fa-plus"})," Upload IFC"]})})]}),c.length?Object(m.jsx)("h3",{className:"list-title",children:"List of IFC models"}):null,Object(m.jsxs)("div",{id:"models-list",children:[c.length?c.map((function(e,t){return Object(m.jsx)(y,{cloud_id:l,project_id:d,model:e,setLoader:p,models:c,setModels:s},t)})):Object(m.jsx)("span",{id:"empty-list",children:"No IFCs yet, click the button above to add one"}),Object(m.jsx)(h,{show:g,icon:Object(m.jsx)("i",{className:"fab fa-bimobject"}),title:"Add new IFC",body:L,hide:E,submit:I})]})]})})}var C=c(46);function S(){var e=Object(r.g)(),t=e.cloud_id,c=e.project_id,n=e.ifc_id;return Object(a.useEffect)((function(){Object(C.a)({api:{ifcIds:[parseInt(n)],cloudId:parseInt(t),projectId:parseInt(c),accessToken:localStorage.getItem("access_token").substr(7)}}).mount("#viewer")}),[t,c,n]),Object(m.jsx)("div",{className:"viewer-container",children:Object(m.jsx)("div",{id:"viewer"})})}var _=c(49),I=c.n(_),E=c(50),L=c.n(E);function T(e){var t=e.setToken,c=Object(a.useState)({email:"",password:""}),n=Object(i.a)(c,2),s=n[0],o=n[1],r=Object(a.useState)(" "),l=Object(i.a)(r,2),j=l[0],f=l[1],b=function(e){var t=e.target;if("email"===t.name){var c={email:t.value,password:s.password};o(c)}else if("password"===t.name){var a={email:s.email,password:t.value};o(a)}},h=function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=L.a.stringify({grant_type:"client_credentials",client_id:"b7a0d0fc-0c11-4837-a4f7-e65265c0a9a8",client_secret:"820582cd246c060cf91a726b7ddb2330333a197057c366c533d74c83"}),c={method:"post",url:"https://iam.bimdata.io/auth/realms/bimdata/protocol/openid-connect/token",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t},e.prev=2,e.next=5,I()(c);case 5:return a=e.sent,e.next=8,a.data.access_token;case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(d.a.mark((function e(c){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),""!==s.password&&""!==s.email){e.next=5;break}return f("Please enter your credentials"),setTimeout((function(){return f(" ")}),3e3),e.abrupt("return");case 5:(a=new Headers).append("Content-Type","application/json"),n=JSON.stringify({email:s.email,password:s.password}),fetch("http://localhost:5000/api/auth/",{method:"POST",headers:a,body:n,redirect:"follow"}).then((function(e){return e.json()})).then(function(){var e=Object(u.a)(d.a.mark((function e(c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("msg"in c)){e.next=4;break}return f(c.msg),setTimeout((function(){return f(" ")}),3e3),e.abrupt("return");case 4:return e.next=6,h();case 6:a=e.sent,localStorage.setItem("access_token","Bearer "+a),localStorage.setItem("user",s.email),t("Bearer "+a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log("error",e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"login_container",children:[Object(m.jsx)("h1",{children:"Please sign in to your account"}),Object(m.jsxs)("div",{className:"login_form",children:[Object(m.jsx)("div",{className:"icon",children:Object(m.jsx)("i",{className:"fas fa-globe-africa"})}),Object(m.jsxs)("form",{action:"",onSubmit:p,children:[Object(m.jsx)("label",{htmlFor:"email",className:"label",children:"Email: "}),Object(m.jsx)("input",{type:"email",name:"email",className:"field",onChange:b,value:s.email,autoFocus:!0}),Object(m.jsx)("label",{htmlFor:"password",className:"label",children:"Password: "}),Object(m.jsx)("input",{type:"password",name:"password",className:"field",onChange:b,value:s.password}),Object(m.jsx)("button",{type:"submit",children:"Sign in"}),Object(m.jsx)("span",{id:"login-alerts",children:j})]})]})]})}var F=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(g,{setToken:n,token:c}),c?Object(m.jsxs)(r.c,{children:[Object(m.jsx)(r.a,{path:"/",element:Object(m.jsx)(v,{})}),Object(m.jsx)(r.a,{path:"/clouds",element:Object(m.jsx)(v,{})}),Object(m.jsx)(r.a,{path:"/clouds/:cloud_id/projects",element:Object(m.jsx)(w,{})}),Object(m.jsx)(r.a,{path:"/clouds/:cloud_id/projects/:project_id/models",element:Object(m.jsx)(k,{})}),Object(m.jsx)(r.a,{path:"/clouds/:cloud_id/projects/:project_id/models/viewer/:ifc_id",element:Object(m.jsx)(S,{})})]}):Object(m.jsx)(T,{setToken:n})]})},A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,87)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;c(e),a(e),n(e),s(e),o(e)}))};o.a.render(Object(m.jsx)(n.a,{children:Object(m.jsx)(F,{})}),document.getElementById("root")),A()}},[[86,1,2]]]);
//# sourceMappingURL=main.f0858d7b.chunk.js.map